# 1C API Quick Reference

## –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**Base URL**: `http://172.16.77.34/stroyast_test/hs/Ai`
**Auth**: `HTTPBasicAuth('Admin', '789654')`

## Endpoints

### 1Ô∏è‚É£ GET /GetGroups
üìã **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–∞—Ç–∞–ª–æ–≥ –≤—Å–µ—Ö –≥—Ä—É–ø–ø –∏ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã (–ë–ï–ó —Ü–µ–Ω/–æ—Å—Ç–∞—Ç–∫–æ–≤)

```bash
curl -u Admin:789654 http://172.16.77.34/stroyast_test/hs/Ai/GetGroups
```

**Response**:
```json
{
  "groups": [
    {
      "–Ω–∞–∑–≤–∞–Ω–∏–µ": "C –∫–ª–∞—Å—Å",
      "–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞": "00-00023614",  // ‚Üê –ö–û–î –ì–†–£–ü–ü–´
      "items": [
        {
          "–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞": "00-00010232",  // ‚Üê –ö–û–î –¢–û–í–ê–†–ê
          "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ë–ª–æ–∫ –•–∞—É—Å —Å—Ç—Ä. —Å—É—Ö. —Ö–≤. 28—Ö140—Ö3000 –∫–ª–∞—Å—Å –°"
        }
      ]
    }
  ]
}
```

**–†–∞–∑–º–µ—Ä**: ~90KB, ~30 –≥—Ä—É–ø–ø, —Å–æ—Ç–Ω–∏ —Ç–æ–≤–∞—Ä–æ–≤
**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ! TTL 1 —á–∞—Å

---

### 2Ô∏è‚É£ POST /GetItems
üí∞ **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—ã –∏ –æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –ì–†–£–ü–ü

```bash
curl -X POST -u Admin:789654 \
  -H "Content-Type: application/json; charset=utf-8" \
  -d '{"items": ["00-00023614"]}' \
  http://172.16.77.34/stroyast_test/hs/Ai/GetItems
```

**Request**: `{ "items": ["–ö–û–î_–ì–†–£–ü–ü–´_1", "–ö–û–î_–ì–†–£–ü–ü–´_2"] }`

**Response**:
```json
{
  "items": [
    {
      "–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ": "–ë–ª–æ–∫ –•–∞—É—Å —Å—Ç—Ä. —Å—É—Ö. —Ö–≤. 28—Ö140—Ö3000 –∫–ª–∞—Å—Å –°",
      "–¶–µ–Ω–∞": 22000,
      "–ö–æ–¥": "00-00010232",
      "–û—Å—Ç–∞—Ç–æ–∫": "–ü–æ –ø—Ä–µ–¥–∑–∞–∫–∞–∑—É"
    }
  ]
}
```

---

### 3Ô∏è‚É£ POST /GetDetailedItems
üîç **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –¢–û–í–ê–†–ê–ú

```bash
curl -X POST -u Admin:789654 \
  -H "Content-Type: application/json; charset=utf-8" \
  -d '{"items": ["00-00010232"]}' \
  http://172.16.77.34/stroyast_test/hs/Ai/GetDetailedItems
```

**Request**: `{ "items": ["–ö–û–î_–¢–û–í–ê–†–ê_1", "–ö–û–î_–¢–û–í–ê–†–ê_2"] }`

**Response**:
```json
{
  "items": [
    {
      "–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ": "–ë–ª–æ–∫ –•–∞—É—Å —Å—Ç—Ä. —Å—É—Ö. —Ö–≤. 28—Ö140—Ö3000 –∫–ª–∞—Å—Å –°",
      "–¶–µ–Ω–∞": 22000,
      "–û—Å—Ç–∞—Ç–æ–∫": "–ü–æ –ø—Ä–µ–¥–∑–∞–∫–∞–∑—É",
      "–¢–æ–ª—â–∏–Ω–∞": "28",
      "–®–∏—Ä–∏–Ω–∞": "140",
      "–î–ª–∏–Ω–∞": "3 000",
      "–í–ª–∞–∂–Ω–æ—Å—Ç—å": "—Å—É—Ö–æ–π 12-14%",
      "–°–æ—Ä—Ç": "–∫–ª–∞—Å—Å –°",
      "–ü–æ—Ä–æ–¥–∞": "—Ö–≤–æ—è",
      "–°—Ä–æ–∫–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞–¥–Ω–û–±—â–∏–µ": "7",
      "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–≤–º2–û–±—â–∏–µ": "2,38",
      "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è–µ–¥–∏–∑–º–µ—Ä–µ–Ω–∏—è1": "–º2",
      "–ö–æ—ç—Ñ–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è–µ–¥–∏–∑–º–µ—Ä–µ–Ω–∏—è1": "0,42"
    }
  ]
}
```

---

## –ö–ª—é—á–µ–≤–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ

| Endpoint | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–¥—ã | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|----------|----------------|------------|---------------|
| `/GetGroups` | - | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ | –ü–æ–∏—Å–∫ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è |
| `/GetItems` | **–ì–†–£–ü–ü** | –¶–µ–Ω—ã + –æ—Å—Ç–∞—Ç–∫–∏ | –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| `/GetDetailedItems` | **–¢–û–í–ê–†–û–í** | –í—Å–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ | –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞ |

---

## Python –ø—Ä–∏–º–µ—Ä

```python
import requests
from requests.auth import HTTPBasicAuth

auth = HTTPBasicAuth('Admin', '789654')
base = "http://172.16.77.34/stroyast_test/hs/Ai"

# 1. –ö–∞—Ç–∞–ª–æ–≥
groups = requests.get(f"{base}/GetGroups", auth=auth).json()

# 2. –¢–æ–≤–∞—Ä—ã –≥—Ä—É–ø–ø—ã —Å —Ü–µ–Ω–∞–º–∏ (–ö–û–î –ì–†–£–ü–ü–´!)
items = requests.post(
    f"{base}/GetItems",
    json={"items": ["00-00023614"]},
    auth=auth
).json()

# 3. –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞ (–ö–û–î –¢–û–í–ê–†–ê!)
details = requests.post(
    f"{base}/GetDetailedItems",
    json={"items": ["00-00010232"]},
    auth=auth
).json()
```

---

## ReAct Agent Tools

### üîé search_product_groups
```python
search_product_groups(keywords="–≤–∞–≥–æ–Ω–∫–∞", exact_match=False)
# ‚Üí –ò—â–µ—Ç –≤ GetGroups –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º
```

### üì¶ get_category_items
```python
get_category_items(
    group_codes=["00-00023614"],
    filter_available_only=True,
    max_price=15000
)
# ‚Üí GetItems + —Ñ–∏–ª—å—Ç—Ä—ã
```

### üìã get_product_details
```python
get_product_details(item_codes=["00-00010232"])
# ‚Üí GetDetailedItems –¥–ª—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
```

---

## Decision Flow

```
–ö–ª–∏–µ–Ω—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç "—á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å?"
  ‚Üì
search_product_groups ‚Üí –Ω–∞–π—Ç–∏ –≥—Ä—É–ø–ø—ã
  ‚Üì
–ö–ª–∏–µ–Ω—Ç "–ø–æ–∫–∞–∂–∏—Ç–µ —Ü–µ–Ω—ã"
  ‚Üì
get_category_items ‚Üí —Ü–µ–Ω—ã + –æ—Å—Ç–∞—Ç–∫–∏
  ‚Üì
–ö–ª–∏–µ–Ω—Ç "—Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø—Ä–æ —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä"
  ‚Üì
get_product_details ‚Üí –≤—Å–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
```

---

## –í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å

‚ö†Ô∏è **GetItems vs GetDetailedItems**:
- `GetItems` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–¥—ã **–ì–†–£–ü–ü** (`–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞` –∏–∑ `groups[].–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞`)
- `GetDetailedItems` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–¥—ã **–¢–û–í–ê–†–û–í** (`–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞` –∏–∑ `items[].–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞`)

‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- `GetGroups` –º–µ–Ω—è–µ—Ç—Å—è —Ä–µ–¥–∫–æ ‚Üí –∫—ç—à –Ω–∞ 1 —á–∞—Å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- `GetItems` –∏ `GetDetailedItems` –º–æ–≥—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ 5-10 –º–∏–Ω—É—Ç

üöÄ **Batch –∑–∞–ø—Ä–æ—Å—ã**:
- –õ—É—á—à–µ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å —Å –º–∞—Å—Å–∏–≤–æ–º –∫–æ–¥–æ–≤, —á–µ–º N –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –æ–¥–Ω–æ–º—É

---

**–°–º. —Ç–∞–∫–∂–µ**: [1C_INTEGRATION_DESIGN.md](./1C_INTEGRATION_DESIGN.md) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
