INFO:     Will watch for changes in these directories: ['/home/said/agency/1/consultant']
INFO:     Uvicorn running on http://0.0.0.0:5537 (Press CTRL+C to quit)
INFO:     Started reloader process [51700] using WatchFiles
INFO:     Started server process [51707]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:43392 - "GET /health HTTP/1.1" 200 OK
INFO:ai_service:Received message from user stazizovs@gmail.com: подскажите как у вас заказать дерево
...
INFO:ai_service:Metadata: {'first_name': 'Said Azizov', 'channel': 'email', 'email': 'stazizovs@gmail.com'}
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:ai_service:Classification: ORDER_LEAD | Reasoning: Пользователь интересуется, как заказать дерево — это запрос на оформление заказа/лид по пиломатериалам. | Ignore: False
INFO:ai_service:Agent response generated for user stazizovs@gmail.com
INFO:     127.0.0.1:43474 - "POST /chat HTTP/1.1" 200 OK
INFO:ai_service:Received message from user stazizovs@gmail.com: подскажите как у вас заказать дерево
...
INFO:ai_service:Metadata: {'first_name': 'Said Azizov', 'channel': 'email', 'email': 'stazizovs@gmail.com'}
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:ai_service:Classification: ORDER_LEAD | Reasoning: Пользователь спрашивает, как заказать древесину — это запрос на оформление заказа/лид. | Ignore: False
INFO:ai_service:Agent response generated for user stazizovs@gmail.com
INFO:     127.0.0.1:43710 - "POST /chat HTTP/1.1" 200 OK
INFO:ai_service:Received message from user 1103652370: Привет...
INFO:ai_service:Metadata: {'first_name': 'Said', 'last_name': 'Azizov', 'username': 'said_azizov', 'language_code': 'en', 'channel': 'telegram'}
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
INFO:ai_service:Classification: SMALL_TALK | Reasoning: Пользователь написал привет — это приветствие/маленький разговор (small talk). | Ignore: False
INFO:ai_service:Agent response generated for user 1103652370
INFO:     127.0.0.1:47418 - "POST /chat HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'bot.py', 'ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [51707]
INFO:     Started server process [68909]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/json.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/provision.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/naming.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mssql/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/reflection.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/_typing.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/queue.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/engines.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/plugin/bootstrap.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/evaluator.py', '.venv/lib64/python3.12/site-packages/psycopg2/errorcodes.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/mysqldb.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/mypy/infer.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mssql/base.py', '.venv/lib64/python3.12/site-packages/psycopg2/errors.py', '.venv/lib64/python3.12/site-packages/asyncpg/protocol/__init__.py', '.venv/lib64/python3.12/site-packages/asyncpg/cluster.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/event/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/event/api.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/_py_row.py', '.venv/lib64/python3.12/site-packages/alembic/environment.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_extension_interface.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/mutable.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/fixtures/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/pymysql.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/_typing.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_greenlet_trash.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/_py_processors.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/aiomysql.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/pg_catalog.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/fixtures/mypy.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/pg8000.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/util.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/_selectable_constructors.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_sequence.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/mypy/decl_class.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/interfaces.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/deprecations.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/sqlite/provision.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/properties.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/strategy_options.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/asyncio/result.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/typing.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_cpp.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/types.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/fail_switch_three_greenlets.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/fixtures/sql.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/persistence.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/assertsql.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/_collections.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/exc.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/sqltypes.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/_elements_constructors.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/create.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/fixtures/__init__.py', '.venv/lib64/python3.12/site-packages/asyncpg/introspection.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/characteristics.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/_psycopg_common.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/event/legacy.py', '.venv/lib64/python3.12/site-packages/asyncpg/serverversion.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/traversals.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/mypy/names.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/connectors/pyodbc.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/context.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/cache_key.py', '.venv/lib64/python3.12/site-packages/asyncpg/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/declarative/__init__.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/fail_switch_three_greenlets2.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/instrumentation.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/mypy/plugin.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/reserved_words.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/mariadbconnector.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/compat.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/operators.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/result.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/_has_cy.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_unicode_ddl.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_select.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/provision.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/bulk_persistence.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/exc.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/oracle/vector.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/events.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/sqlite/json.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/events.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/mock.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mssql/provision.py', '.venv/lib64/python3.12/site-packages/asyncpg/connection.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mssql/json.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/dynamic.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/oracle/provision.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/tool_support.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_rowcount.py', '.venv/lib64/python3.12/site-packages/asyncpg/connresource.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/elements.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_leaks.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/horizontal_shard.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/clsregistry.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_ddl.py', '.venv/lib64/python3.12/site-packages/asyncpg/compat.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/events.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/dependency.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/coercions.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/asyncio/scoping.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/sync.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/enumerated.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/asyncio/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/event/registry.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/named_types.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/schema.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/baked.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/inspection.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mssql/pyodbc.py', '.venv/lib64/python3.12/site-packages/alembic/op.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/unitofwork.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_results.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/decl_api.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/warnings.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/_typing.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/sqlite/dml.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/event/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/langhelpers.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/query.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/asyncmy.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/decl_base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/concurrency.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/strategies.py', '.venv/lib64/python3.12/site-packages/asyncpg/prepared_stmt.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/dml.py', '.venv/lib64/python3.12/site-packages/alembic/command.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/state.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/config.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/assertions.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/pyodbc.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/util.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/event/attr.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/session.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/descriptor_props.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/scoping.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/default_comparator.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/requirements.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/expression.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/_orm_types.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/dml.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/asyncio/exc.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_update_delete.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/roles.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/path_registry.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mssql/pymssql.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_greenlet.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/array.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/relationships.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/writeonly.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/identity.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_types.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/mariadb.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/_dml_constructors.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/pool/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/log.py', '.venv/lib64/python3.12/site-packages/asyncpg/_version.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/instrumentation.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mssql/aioodbc.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/operators.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/pool/events.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/asyncio/engine.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/hybrid.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/types.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/mypy/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/selectable.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_cte.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/leakcheck.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/oracle/cx_oracle.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_gc.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/loading.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/json.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_dialect.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/plugin/pytestplugin.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/state_changes.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/connectors/__init__.py', '.venv/lib64/python3.12/site-packages/asyncpg/_asyncio_compat.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/plugin/plugin_base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/pool/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/mypy/util.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_tracing.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/connectors/aioodbc.py', '.venv/lib64/python3.12/site-packages/psycopg2/extras.py', '.venv/lib64/python3.12/site-packages/greenlet/platform/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/_py_util.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/visitors.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/_py_util.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/serializer.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_generator_nested.py', '.venv/lib64/python3.12/site-packages/asyncpg/cursor.py', '.venv/lib64/python3.12/site-packages/alembic/context.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/oracle/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/lambdas.py', '.venv/lib64/python3.12/site-packages/asyncpg/pool.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/attributes.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/schema.py', '.venv/lib64/python3.12/site-packages/asyncpg/protocol/codecs/__init__.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/fail_cpp_exception.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg2.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/provision.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/oracle/types.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_version.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/type_api.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/fail_switch_two_greenlets.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/cymysql.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/_py_collections.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/fail_slp_switch.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/mapped_collection.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_deprecations.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/topological.py', '.venv/lib64/python3.12/site-packages/asyncpg/types.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/pool/impl.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/processors.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_stack_saved.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/connectors/asyncio.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/automap.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/declarative/extensions.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/exclusions.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/sqlite/base.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/fail_clearing_run_switches.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/crud.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/associationproxy.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/ddl.py', '.venv/lib64/python3.12/site-packages/asyncpg/utils.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/events.py', '.venv/lib64/python3.12/site-packages/psycopg2/_ipaddress.py', '.venv/lib64/python3.12/site-packages/asyncpg/connect_utils.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/schema.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_reflection.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/hstore.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/preloaded.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/url.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/oracle/base.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_contextvars.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/future/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/reflection.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/asyncio/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/strategies.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/oracle/oracledb.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mssql/information_schema.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/ext.py', '.venv/lib64/python3.12/site-packages/asyncpg/transaction.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/_orm_constructors.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/sqlite/pysqlcipher.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/default.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/dml.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/asyncio.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/indexable.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/plugin/__init__.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_generator.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/fixtures/orm.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/util.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/compiler.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/base.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/annotation.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/future/engine.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_weakref.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/profiling.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/interfaces.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/compiler.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/collections.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/cyextension/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/ranges.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/util.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/entities.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/types.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/pickleable.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/cursor.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/orderinglist.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/mysql/mysqlconnector.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/__init__.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/functions.py', '.venv/lib64/python3.12/site-packages/psycopg2/pool.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/test_throw.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/orm/mapper.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/engine/row.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/sql/expression.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg2cffi.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/ext/mypy/apply.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/sqlite/pysqlite.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/oracle/dictionary.py', '.venv/lib64/python3.12/site-packages/greenlet/tests/fail_initialstub_already_started.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/testing/suite/test_insert.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py', '.venv/lib64/python3.12/site-packages/sqlalchemy/dialects/sqlite/__init__.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [68909]
INFO:     Started server process [111893]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/models.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [111893]
WARNING:  WatchFiles detected changes in 'db/models.py'. Reloading...
INFO:     Started server process [112274]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/models.py'. Reloading...
INFO:     Started server process [112321]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [112332]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/session.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [112332]
WARNING:  WatchFiles detected changes in 'db/session.py'. Reloading...
INFO:     Started server process [113333]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [113358]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [113358]
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Started server process [113434]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/session.py'. Reloading...
INFO:     Started server process [113446]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py', 'db/session.py'. Reloading...
INFO:     Started server process [113495]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [113564]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [113564]
INFO:     Started server process [129399]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [129399]
INFO:     Started server process [129569]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [129569]
INFO:     Started server process [129648]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [129648]
INFO:     Started server process [138633]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [138633]
INFO:     Started server process [139154]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [139154]
INFO:     Started server process [139172]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [139172]
INFO:     Started server process [139646]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/init_db.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [139646]
WARNING:  WatchFiles detected changes in 'db/init_db.py'. Reloading...
INFO:     Started server process [140098]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [140152]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/init_db.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [140152]
INFO:     Started server process [140209]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'db/init_db.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [140209]
INFO:     Started server process [140570]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [140570]
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Started server process [140667]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [140753]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [140753]
INFO:     Started server process [140958]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [140958]
Process SpawnProcess-27:
Traceback (most recent call last):
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap_external>", line 1133, in get_code
  File "<frozen importlib._bootstrap_external>", line 1063, in source_to_code
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/home/said/agency/1/consultant/ai_service.py", line 168
    except Exception as e:
    ^^^^^^
SyntaxError: invalid syntax
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
Process SpawnProcess-28:
Traceback (most recent call last):
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/said/agency/1/consultant/.venv/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/said/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap_external>", line 1133, in get_code
  File "<frozen importlib._bootstrap_external>", line 1063, in source_to_code
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/home/said/agency/1/consultant/ai_service.py", line 168
    except Exception as e:
    ^^^^^^
SyntaxError: invalid syntax
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Started server process [141865]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'bot.py', 'db/models.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [141865]
WARNING:  WatchFiles detected changes in 'bot.py', 'db/models.py'. Reloading...
INFO:     Started server process [142751]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [142813]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [142813]
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Started server process [142926]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [142986]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [142986]
WARNING:  WatchFiles detected changes in 'ai_service.py'. Reloading...
INFO:     Started server process [143206]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Started server process [143218]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
